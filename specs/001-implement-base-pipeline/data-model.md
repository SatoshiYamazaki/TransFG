# Data Model (Phase 1)

## Entities

### Run
- Fields: run_id (string), seed (int), dataset (string), model_type (string), img_size (int), train_batch_size (int), eval_batch_size (int), num_steps (int), eval_every (int), output_dir (string), device (string), tiny_train_subset_path (string), tiny_infer_subset_path (string), checkpoint_id (string, optional), config_hash (string)
- Relationships: produces EnvStamp; produces TensorBoard logs and PredictionArtifact; may reference Checkpoint.

### EnvStamp
- Fields (per constitution/spec): run_id, config_hash (SHA256 of resolved config/args), git_commit, os_version, python_version, torch_version, torchvision_version, ml_collections_version, driver_version, cuda_version, cudnn_version, gpu_name, gpu_count, fp16 (bool, false for this feature), seed, requirements_checksum, env_hash, tiny_train_subset_path, tiny_infer_subset_path, timestamp, fiftyone_version, torch_build.
- Stored at: `output/<run>/env_stamp.json`.
- Relationships: links to Run (by run_id) and Checkpoint (via checkpoint_id in run metadata).

### PredictionArtifact
- Fields: run_id, sample_id, label, prediction, scores/logits (optional), checkpoint_id (string), dataset_split (e.g., val/test), model_type, config_hash, timestamp.
- Stored at: `output/<run>/fiftyone/predictions.jsonl`.
- Relationships: generated by Run (train eval phase or eval CLI); tied to Checkpoint when available.

### TensorBoardLog
- Fields: run_id, log_dir (`output/tb/<run>`), keys (loss, accuracy, lr), steps, timestamp.
- Relationships: generated by Run; referenced alongside PredictionArtifact.

### Checkpoint (external/ignored)
- Fields: checkpoint_id (SHA256 of file), path (`output/<run>/checkpoints/<checkpoint_id>.bin` ignored by VCS), associated run_id, config_hash, timestamp.
- Relationships: consumed by eval-only Run; linked in EnvStamp and PredictionArtifact metadata.

### LabelMap
- Fields: run_id, dataset, label_to_index mapping, checksum.
- Stored at: `output/<run>/labelmap.json` with checksum recorded in metadata.
- Relationships: used by PredictionArtifact to ensure label order fidelity.
